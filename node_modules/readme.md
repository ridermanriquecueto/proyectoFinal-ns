API REST - Catálogo de Productos

API para gestionar productos en un catálogo, con autenticación JWT y almacenamiento en **Firebase Firestore**. Permite operaciones CRUD sobre productos de manera segura.

---

## Tecnologías

- Node.js (ESModules)
- Express
- Firebase Firestore
- JSON Web Tokens (JWT)
- Body-Parser
- CORS
- dotenv

---

## Configuración

1. Clonar el repositorio:

```bash
git clone <URL_DEL_REPOSITORIO>
cd api-catalogo-productos
Instalar dependencias:

bash
Copiar código
npm install
Crear archivo .env:

env
Copiar código
PORT=3000
JWT_SECRET=miclavesupersegura123

FIREBASE_API_KEY=<TU_API_KEY>
FIREBASE_AUTH_DOMAIN=<TU_AUTH_DOMAIN>
FIREBASE_PROJECT_ID=<TU_PROJECT_ID>
FIREBASE_STORAGE_BUCKET=<TU_STORAGE_BUCKET>
FIREBASE_MESSAGING_SENDER_ID=<TU_MESSAGING_SENDER_ID>
FIREBASE_APP_ID=<TU_APP_ID>
Ejecutar servidor:

bash
Copiar código
npm run start
Servidor corriendo en http://localhost:3000.

Rutas
Autenticación
Método	Ruta	Descripción
POST	/api/auth/login	Recibe { username, password } y devuelve un Bearer Token

Productos (protegidas con JWT)
Método	Ruta	Descripción
GET	/api/products	Obtiene todos los productos
GET	/api/products/:id	Obtiene un producto por ID
POST	/api/products/create	Crea un nuevo producto
DELETE	/api/products/:id	Elimina un producto por ID

Todas las rutas de productos requieren Bearer token:

makefile
Copiar código
Authorization: Bearer <TOKEN>
Estructura del proyecto
bash
Copiar código
api-catalogo-productos/
│
├─ config/firebase.js
├─ controllers/products.controller.js
├─ middlewares/
│   ├─ auth.middleware.js
│   └─ error.middleware.js
├─ models/product.model.js
├─ routes/
│   ├─ products.routes.js
│   └─ auth.routes.js
├─ services/products.service.js
├─ index.js
└─ package.json
Manejo de errores
400 → Bad Request: datos inválidos o faltantes

401 → Unauthorized: token faltante o inválido

403 → Forbidden: acceso denegado

404 → Not Found: ruta inexistente

500 → Internal Server Error: fallo en la base de datos o errores internos

Firestore
Colección: products

Campos de cada documento:

name (string)

price (number)

stock (number)

category (string)

createdAt (timestamp)

Reglas de seguridad (desarrollo):

firebase
Copiar código
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /products/{productId} {
      allow read, write: if true;
    }
  }
}
Ejemplo de uso
Login:

http
Copiar código
POST /api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "password123"
}
Crear producto:

http
Copiar código
POST /api/products/create
Authorization: Bearer <TOKEN>
Content-Type: application/json

{
  "name": "Hilo poliéster 120 verde",
  "price": 14.5,
  "stock": 100,
  "category": "hilos"
}
Obtener productos:

http
Copiar código
GET /api/products
Authorization: Bearer <TOKEN>
Eliminar producto:

http
Copiar código
DELETE /api/products/:id
Authorization: Bearer <TOKEN>